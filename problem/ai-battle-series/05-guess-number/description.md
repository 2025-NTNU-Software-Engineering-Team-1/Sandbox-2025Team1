# Problem 5: 跟 TA 猜數字

## 故事背景

期中考筆試結束後，緊接著就是實作考試。

「同學們！」Gemini 的聲音帶著興奮，「接下來是互動題！」

「我想到了一個 1 到 N 之間的數字！」Gemini 神秘地說，眼中閃爍著狡黠的光芒。

「猜對了加分，猜錯了... 也不會怎樣啦，畢竟我人很好。」

「但是！」Gemini 突然嚴肅起來，「你的猜測次數有限！超過 ⌈log₂(N)⌉ + 1 次就算失敗！」

小 T 興奮地說：「Oh! 這不就是經典的 binary search 嗎！來來來，我可以提示同學們怎麼做！」

「不准提示！」Gemini 立刻阻止，「這是考試！」

「可是你剛剛說 binary search 了... 🤔」小 T 困惑地指出。

「我說了嗎？我不記得說過。」Gemini 一臉無辜。

Opus 在角落裡喃喃自語：「讓我仔細思考一下最優策略... 若採用二分搜尋法，每次猜測可以將搜尋範圍縮小一半，因此對於範圍 [1, N]，最多需要 ⌈log₂(N)⌉ 次猜測。這是一個經典的分治演算法應用...」

「夠了 Opus！」Gemini 翻白眼，「你又在劇透了！」

「綜觀全局，」小 T 補充道，「那個坐窗邊的同學，你知道什麼是二分搜尋嗎？」

---

## 組員群組訊息

```
【第三組】軟工專題討論區

阿明：實作考試大家準備好了嗎？
      聽說有互動題

小胖：互動題？
      這種東西太簡單了
      不就是猜數字嗎
      二分搜尋 O(log n) 搞定

小美：你確定你會寫嗎...
      上次你說很簡單的東西後來好像沒交

小胖：那是因為我在優化
      追求完美需要時間

阿傑：                              [已讀]

阿明：阿傑你準備好了嗎？

阿傑：有

阿明：...一個字

學霸：記得 flush 輸出

小胖：這個當然知道
      C++ 用 endl 或 cout.flush()
      Python 用 flush=True
      基本中的基本

小美：那你上次作業為什麼卡住...

小胖：那是評測系統的問題
      不是我的問題

阿明：...

學霸：endl

小胖：對對對，學霸說得對
      我就是這個意思

[考試中]

小胖：欸
      我好像 WA 了

阿明：什麼情況？

小胖：不知道
      應該是測資有問題

小美：...測資是助教出的

小胖：那就是助教的問題

學霸：邊界

小胖：什麼邊界？

學霸：lo hi

小胖：噢...
      好像懂了

阿傑：                              [已讀]
      AC

阿明：！！！
      阿傑 AC 了！

小胖：等等我也快了
      就差一點點
```

---

## 題目說明

這是一道 **互動題**。Gemini 心中想了一個 1 到 N 之間的整數，你需要透過一系列猜測來找出這個數字。

### 互動協議

1. 首先，你的程式會讀入一個整數 N，表示數字範圍是 [1, N]
2. 你可以輸出 `guess X` 來猜測數字 X
3. 系統會回應：
   - `HIGHER`：答案比你猜的數字大
   - `LOWER`：答案比你猜的數字小
   - `CORRECT`：恭喜！你猜對了！
4. 當收到 `CORRECT` 後，你的程式應該結束
5. 你最多可以猜 **32 次**

### 限制

- 1 ≤ N ≤ 10⁹
- 最多 32 次猜測
- 答案保證存在

## 互動範例

```
[你的程式讀取] 100
[你的程式輸出] guess 50
[系統回應] HIGHER
[你的程式輸出] guess 75
[系統回應] LOWER
[你的程式輸出] guess 62
[系統回應] CORRECT
```

在這個例子中：
- N = 100，表示答案在 [1, 100] 之間
- 答案是 62
- 你用了 3 次猜測就找到了

## 重要注意事項

### 刷新輸出緩衝區

互動題需要確保每次輸出後都刷新緩衝區，否則可能導致程式卡住：

**C++：**
```cpp
cout << "guess " << x << endl;  // endl 會自動刷新
// 或者
cout << "guess " << x << "\n";
cout.flush();
```

**C：**
```c
printf("guess %d\n", x);
fflush(stdout);
```

**Python：**
```python
print(f"guess {x}", flush=True)
```

### 讀取回應

**C++：**
```cpp
string response;
cin >> response;
if (response == "CORRECT") {
    // 找到答案了！
}
```

**Python：**
```python
response = input().strip()
if response == "CORRECT":
    # 找到答案了！
```

## 提示

- Gemini：「二分搜尋？什麼二分搜尋？我沒說過這個詞... 還是說我說過？算了不重要。」
- 小 T：「Okay okay, I'll give you a hint 🤫：每次猜測都猜中間值！來來來，那個戴眼鏡的同學，你來示範一下！」
- Opus：「讓我仔細思考一下... 對於 N = 10⁹，log₂(10⁹) ≈ 30，所以 32 次猜測綽綽有餘。這個數學計算是基於二元對數的性質...」

### 二分搜尋模板

如果你真的需要提示（Gemini 說沒給過提示）：

```cpp
int lo = 1, hi = n;
while (lo <= hi) {
    int mid = lo + (hi - lo) / 2;
    cout << "guess " << mid << endl;

    string response;
    cin >> response;

    if (response == "CORRECT") {
        return 0;  // 找到了！
    } else if (response == "HIGHER") {
        lo = mid + 1;  // 答案在右半邊
    } else {
        hi = mid - 1;  // 答案在左半邊
    }
}
```

## 評分標準

- **Pipeline 功能**：Interactive Mode
- **時間限制**：2000 ms
- **記憶體限制**：64 MB
- **測資組數**：5 組

## Interactive Mode 說明

本題使用 **Interactive Mode**，這種模式下：

1. **雙向通訊**：你的程式與評測系統（教師程式）進行即時互動
2. **動態回應**：每次輸出後，系統會根據你的猜測給予回應
3. **次數限制**：通常有查詢次數或互動次數的限制

這模擬了真實世界中的互動式系統，例如：
- 線上對戰遊戲
- 客服機器人
- 互動式除錯工具

## 出題者

Gemini（雙子）

---

*「Did I say binary search? I don't recall saying that. Or did I? Wait, what were we talking about?」—— Gemini*

---

## 組員事後對話

```
【第三組】軟工專題討論區

[考試結束後]

阿明：大家互動題考得如何？

小美：我過了！
      二分搜尋真的很好用

小胖：我也過了
      不過我覺得測資太簡單
      應該要出更難的邊界條件

阿明：那你考試的時候不是說測資有問題嗎...

小胖：那是後來修正的
      可能助教偷偷改了

小美：...測資不能改吧

學霸：不能

小胖：反正我過了就好

阿傑：                              [已讀]

阿明：阿傑你最後過了嗎？

阿傑：過了

阿明：太好了！
      話說你中間怎麼那麼快 AC？

阿傑：二分

小胖：對嘛二分搜尋很簡單
      我剛剛也是這樣說的

學霸：你說測資有問題

小胖：...
      那是開玩笑的啦
```
